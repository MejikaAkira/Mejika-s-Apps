<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Áôæ‰∫∫‰∏ÄÈ¶ñ ÂíåÊ≠åÊ§úÁ¥¢ - „ÅÑ„Å´„Åó„Åà„ÅÆÂøÉ„ÇíÊé¢„Çã</title>
    <meta name="description" content="Ëá™ÁÑ∂Ë®ÄË™û„ÅßÁôæ‰∫∫‰∏ÄÈ¶ñ„ÇíÊ§úÁ¥¢„ÄÇ„ÅÑ„Å´„Åó„Åà„ÅÆÊ≠å‰∫∫„Åü„Å°„ÅÆÂøÉ„ÇíÁèæ‰ª£„Å´Ëòá„Çâ„Åõ„Åæ„Åô„ÄÇ">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@300;400;500;600&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Ê°ú„ÅÆË£ÖÈ£æ -->
        <div class="sakura-decoration">
            <div class="sakura sakura-1">üå∏</div>
            <div class="sakura sakura-2">üå∏</div>
            <div class="sakura sakura-3">üå∏</div>
        </div>

        <header class="main-header">
            <div class="header-content">
                <h1 class="main-title">
                    <span class="title-main">Áôæ‰∫∫‰∏ÄÈ¶ñ</span>
                    <span class="title-sub">ÂíåÊ≠åÊ§úÁ¥¢</span>
                </h1>
                <p class="header-description">„ÅÑ„Å´„Åó„Åà„ÅÆÂøÉ„ÇíÊé¢„Çã</p>
                <div class="header-decoration">
                    <span class="moon">üåô</span>
                    <span class="cloud">‚òÅ</span>
                </div>
            </div>
        </header>

        <main class="main-content">
            <section class="search-section" aria-labelledby="search-title">
                <div class="search-container">
                    <h2 id="search-title" class="section-title">Ê§úÁ¥¢ÊñπÊ≥ï„ÇíÈÅ∏„Å∂</h2>
                    
                    <div class="search-mode-toggle" role="tablist" aria-label="Ê§úÁ¥¢„É¢„Éº„ÉâÈÅ∏Êäû">
                        <button id="semanticModeBtn" class="mode-btn active" role="tab" aria-selected="true" aria-controls="semanticSearchForm">
                            <span class="mode-icon">üéØ</span>
                            <span class="mode-text">ÊÑèÂë≥Ê§úÁ¥¢</span>
                        </button>
                        <button id="dbModeBtn" class="mode-btn" role="tab" aria-selected="false" aria-controls="dbSearchForm">
                            <span class="mode-icon">üìö</span>
                            <span class="mode-text">Ê≠åÈõÜÊ§úÁ¥¢</span>
                        </button>
                    </div>

                    <div class="search-form-container">
                        <form id="semanticSearchForm" class="search-form active" role="tabpanel" aria-labelledby="semanticModeBtn">
                            <div class="search-input-group">
                                <input type="text" id="searchQuery" placeholder="‰æã: Êò•„ÅÆÊ°ú„ÄÅÊÅã„ÅÆÊ≠å„ÄÅÁßã„ÅÆÊúà..." maxlength="100" aria-label="Ê§úÁ¥¢„ÇØ„Ç®„É™">
                                <button type="submit" id="searchButton" aria-label="Ê§úÁ¥¢ÂÆüË°å">
                                    <span class="btn-icon">üîç</span>
                                    <span class="btn-text">Ê§úÁ¥¢</span>
                                </button>
                            </div>
                            <div class="search-options">
                                <label for="resultCount">Ë°®Á§∫‰ª∂Êï∞:</label>
                                <select id="resultCount" aria-label="Ë°®Á§∫‰ª∂Êï∞ÈÅ∏Êäû">
                                    <option value="5">5È¶ñ</option>
                                    <option value="10" selected>10È¶ñ</option>
                                    <option value="20">20È¶ñ</option>
                                </select>
                            </div>
                        </form>

                        <form id="dbSearchForm" class="search-form" role="tabpanel" aria-labelledby="dbModeBtn" style="display:none;">
                            <div class="search-input-group db-search">
                                <select id="dbIdSelect" aria-label="Ê≠åÁï™Âè∑ÈÅ∏Êäû">
                                    <option value="">Ê≠åÁï™Âè∑„ÅßÈÅ∏Êäû</option>
                                </select>
                                <select id="dbPoetSelect" aria-label="Ê≠å‰∫∫ÈÅ∏Êäû">
                                    <option value="">Ê≠å‰∫∫„ÅßÈÅ∏Êäû</option>
                                </select>
                                <select id="dbHeadSelect" aria-label="Ê≠åÂÜíÈ†≠ÈÅ∏Êäû">
                                    <option value="">Ê≠åÂÜíÈ†≠5ÊñáÂ≠ó„ÅßÈÅ∏Êäû</option>
                                </select>
                                <input type="text" id="dbQueryInput" placeholder="ÊâãÂÖ•Âäõ„ÇÇÂèØ" maxlength="100" aria-label="ÊâãÂÖ•ÂäõÊ§úÁ¥¢">
                                <button type="button" id="dbSearchButton" aria-label="Ê≠åÈõÜÊ§úÁ¥¢ÂÆüË°å">
                                    <span class="btn-icon">üìñ</span>
                                    <span class="btn-text">Ê§úÁ¥¢</span>
                                </button>
                            </div>
                            <div class="search-options">
                                <label for="resultCountDb">Ë°®Á§∫‰ª∂Êï∞:</label>
                                <select id="resultCountDb" aria-label="Ë°®Á§∫‰ª∂Êï∞ÈÅ∏Êäû">
                                    <option value="5">5È¶ñ</option>
                                    <option value="10" selected>10È¶ñ</option>
                                    <option value="20">20È¶ñ</option>
                                </select>
                            </div>
                        </form>
                    </div>
                </div>
            </section>

            <section class="status-section" aria-live="polite">
                <div id="statusMessage" class="status-message" role="status"></div>
                <div id="loadingIndicator" class="loading-indicator" style="display: none;" aria-label="Ê§úÁ¥¢‰∏≠">
                    <div class="spinner"></div>
                    <span>Ê§úÁ¥¢‰∏≠...</span>
                </div>
            </section>

            <!-- Ê§úÁ¥¢ÁµêÊûúË°®Á§∫„Ç®„É™„Ç¢ -->
            <div id="results" class="results-container" style="display: none;">
                <div class="results-header">
                    <h3 id="results-title">Ê§úÁ¥¢ÁµêÊûú</h3>
                    <div class="results-meta">
                        <span id="results-count"></span>
                        <span id="search-mode-badge" class="mode-badge"></span>
                    </div>
                </div>
                <div id="results-list" class="results-list"></div>
            </div>

            <!-- Ê§úÁ¥¢ÁµêÊûú„ÉÜ„É≥„Éó„É¨„Éº„ÉàÔºàÈùûË°®Á§∫Ôºâ -->
            <template id="result-template">
                <div class="result-item">
                    <div class="result-content">
                        <div class="poem-info">
                            <div class="poem-header">
                                <span class="poem-id">#<span class="poem-number"></span></span>
                                <span class="poet-name"></span>
                                <span class="similarity-score" style="display: none;"></span>
                            </div>
                            <div class="poem-text"></div>
                            <div class="poem-summary" style="display: none;"></div>
                        </div>
                        <div class="nft-section">
                            <div class="nft-image-container">
                                <img class="nft-image" src="" alt="NFTÁîªÂÉè" loading="lazy">
                                <div class="nft-overlay">
                                    <a class="opensea-link" href="" target="_blank" rel="noopener noreferrer">
                                        <span class="opensea-icon">üåä</span>
                                        <span class="opensea-text">OpenSea</span>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </template>

            <!-- „Ç∑„Çπ„ÉÜ„É†ÊÉÖÂ†±Ë°®Á§∫„Ç®„É™„Ç¢ -->
            <div id="system-info" class="system-info">
                <div class="info-item">
                    <span class="info-label">Á∑èÊ≠åÊï∞:</span>
                    <span id="total-poems">-</span>
                </div>
                <div class="info-item">
                    <span class="info-label">„Ç≠„É£„ÉÉ„Ç∑„É•Ê∏à„Åø„ÇØ„Ç®„É™:</span>
                    <span id="cached-queries">-</span>
                </div>
                <div class="info-item">
                    <span class="info-label">„Ç≠„É£„ÉÉ„Ç∑„É•„Çµ„Ç§„Ç∫:</span>
                    <span id="cache-size">-</span>
                </div>
            </div>

            <!-- ‰ΩøÁî®ÈáèÂà∂ÈôêÊÉÖÂ†±Ë°®Á§∫„Ç®„É™„Ç¢ -->
            <div id="usage-limits" class="usage-limits">
                <h4 class="limits-title">üìä ÁÑ°ÊñôÊû†‰ΩøÁî®Áä∂Ê≥Å</h4>
                <div class="limits-grid">
                    <div class="limit-item">
                        <div class="limit-label">Êú¨Êó•„ÅÆÊ§úÁ¥¢ÊÆã„Çä</div>
                        <div class="limit-value">
                            <span id="daily-searches-remaining">-</span>
                            <span class="limit-max">/ <span id="daily-searches-max">-</span></span>
                        </div>
                        <div class="limit-bar">
                            <div id="daily-searches-bar" class="limit-progress"></div>
                        </div>
                    </div>
                    <div class="limit-item">
                        <div class="limit-label">Êú¨Êó•„ÅÆ„Éà„Éº„ÇØ„É≥ÊÆã„Çä</div>
                        <div class="limit-value">
                            <span id="daily-tokens-remaining">-</span>
                            <span class="limit-max">/ <span id="daily-tokens-max">-</span></span>
                        </div>
                        <div class="limit-bar">
                            <div id="daily-tokens-bar" class="limit-progress"></div>
                        </div>
                    </div>
                    <div class="limit-item">
                        <div class="limit-label">‰ªäÊúà„ÅÆÊ§úÁ¥¢ÊÆã„Çä</div>
                        <div class="limit-value">
                            <span id="monthly-searches-remaining">-</span>
                            <span class="limit-max">/ <span id="monthly-searches-max">-</span></span>
                        </div>
                        <div class="limit-bar">
                            <div id="monthly-searches-bar" class="limit-progress"></div>
                        </div>
                    </div>
                    <div class="limit-item">
                        <div class="limit-label">‰ªäÊúà„ÅÆ„Éà„Éº„ÇØ„É≥ÊÆã„Çä</div>
                        <div class="limit-value">
                            <span id="monthly-tokens-remaining">-</span>
                            <span class="limit-max">/ <span id="monthly-tokens-max">-</span></span>
                        </div>
                        <div class="limit-bar">
                            <div id="monthly-tokens-bar" class="limit-progress"></div>
                        </div>
                    </div>
                </div>
                <div class="limits-note">
                    <p>üí° DBÊ§úÁ¥¢„ÅØÁÑ°Êñô„ÅßÁÑ°Âà∂Èôê„Å´„ÅîÂà©Áî®„ÅÑ„Åü„Å†„Åë„Åæ„Åô</p>
                    <p>üí° ÊÑèÂë≥Ê§úÁ¥¢„ÅØÂÆâÂÖ®„Å™Âà∂ÈôêÂÜÖ„Åß„ÅîÂà©Áî®„ÅÑ„Åü„Å†„Åë„Åæ„Åô</p>
                    <p>üí° Âà∂Èôê„Å´ÈÅî„Åó„ÅüÂ†¥Âêà„ÅØÁøåÊó•„Åæ„Åü„ÅØÁøåÊúà„Åæ„Åß„ÅäÂæÖ„Å°„Åè„Å†„Åï„ÅÑ</p>
                </div>
            </div>
        </main>

        <footer class="main-footer">
            <div class="footer-content">
                <p class="footer-text">&copy; 2024 Áôæ‰∫∫‰∏ÄÈ¶ñ ÂíåÊ≠åÊ§úÁ¥¢„Ç∑„Çπ„ÉÜ„É†</p>
                <div class="footer-decoration">
                    <span class="footer-icon">üéå</span>
                </div>
            </div>
        </footer>
    </div>

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html> 